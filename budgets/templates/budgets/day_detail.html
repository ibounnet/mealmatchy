{% extends "base.html" %}
{% block title %}รายละเอียดงบ {{ date }}{% endblock %}
{% block content %}
<div class="max-w-4xl mx-auto">
  <h1 class="text-xl font-bold mb-2">รายละเอียดงบวันที่ {{ date }}</h1>
  <p class="text-sm text-gray-600 mb-4">
    งบ: <b>{{ budget_amount }}</b> • ใช้ไป: <b>{{ spent_sum }}</b> • คงเหลือ: <b>{{ remain }}</b>
  </p>

  <div class="bg-white rounded-2xl ring-1 ring-gray-100 p-4">
    <ul class="divide-y">
      {% for s in spends %}
      <li class="py-3 flex items-center justify-between">
        <div>
          {% if s.menu %}<b>{{ s.menu.name }}</b>{% else %}รายการ{% endif %}
          <span class="text-gray-500">— {{ s.amount }} ฿</span>
          {% if s.note %}<span class="text-xs text-gray-400"> ({{ s.note }})</span>{% endif %}
        </div>
        <form method="post" action="{% url 'budgets:delete_spend' s.pk %}">
          {% csrf_token %}
          <button class="text-red-600 hover:underline">ลบ</button>
        </form>
      </li>
      {% empty %}
      <li class="py-6 text-center text-gray-500">ยังไม่มีรายการ</li>
      {% endfor %}
    </ul>
  </div>

  <div class="mt-4 flex gap-2">
    <!-- ปุ่มกลับไปตารางสัปดาห์ -->
    <a class="px-3 py-1.5 rounded-lg ring-1 ring-gray-200 hover:bg-gray-50"
       href="{% url 'budgets:home' %}?start={{ week_start|date:'Y-m-d' }}">
      « กลับตารางสัปดาห์
    </a>

    <!-- ปุ่มกลับไปแผนเมนู (ไปที่ budget/?from_plan=1 โดยตรง) -->
    <a href="/budget/?from_plan=1"
       class="px-3 py-1.5 rounded-lg ring-1 ring-gray-200 hover:bg-gray-50">
      ← กลับไปแผนเมนู
    </a>
  </div>
</div>
{% endblock %}
